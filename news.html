<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Stock News</title>
  <style>
    html, body { margin:0; padding:0; width:100%; height:100%; background:#111; }
  </style>
</head>
<body>
  <div id="newsContainer"></div>

  <script type="text/javascript">
    // Get ticker from URL: ?symbol=NASDAQ:AAPL
    const params = new URLSearchParams(window.location.search);
    const symbol = params.get("symbol") || "NASDAQ:AAPL";

    // Use document.write to properly insert the script tag
    document.write(`
      <div class="tradingview-widget-container">
        <div class="tradingview-widget-container__widget"></div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-top-stories.js">
        {
          "symbol": "${symbol}",
          "colorTheme": "dark",
          "isTransparent": false,
          "width": "100%",
          "height": "600",
          "locale": "en"
        }
        </script>
      </div>
    `);
  </script>
</body>
</html>
